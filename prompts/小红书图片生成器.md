codex "请阅读 docs/spec.md，并基于现有模板文件：
- src/templates/pinkStack.ts
- src/templates/blueStack.ts
- src/templates/darkStack.ts
- src/templates/index.ts

完成整个『小红书图片生成器』前端应用。

【硬性要求】
1) 技术栈：Vite + React + TypeScript
2) 必须使用 react-konva 实现画布编辑
3) 模板系统：
    - 从 templates 数组中读取模板
    - 支持在 Toolbar 中切换模板（pink / blue / dark）
    - 切换模板时：只替换背景与 baseLayers，保留当前页的可编辑 elements
4) 画布：
    - 尺寸 1080x1440
    - 背景渐变按模板定义渲染
    - baseLayers 为不可编辑装饰层
    - initialElements 作为页面初始可编辑元素

【编辑能力】
5) 文本：
    - 可新增文本节点
    - 拖拽移动
    - 双击进入编辑态：用 textarea 覆盖 Konva Text，支持中文与换行
    - 右侧属性面板支持：字号 fontSize、颜色 fill、行高 lineHeight、对齐 align
6) 图片：
    - 支持本地上传插入图片
    - 插入后可拖拽、缩放（Transformer）
    - imagePlaceholder 被点击时可直接替换为上传图片
7) 选中与操作：
    - 点击选中节点显示 Transformer
    - 空白区域点击取消选中
    - Delete / Backspace 删除选中节点

【多页】
8) 支持多页：
    - Toolbar 中提供 上一张 / 下一张
    - 默认 3 页
    - pages[pageIndex].nodes 保存当前页状态
    - 切页前保存，切页后加载

【导出】
9) 下载 PNG：
    - 使用 stage.toDataURL({ pixelRatio: 2 })
    - 导出前隐藏 Transformer，导出后恢复
    - 文件名格式：xiaohongshu-{templateId}-{pageIndex}-{timestamp}.png

【UI 布局】
10) 页面布局：
- 顶部：Toolbar（模板选择、上一张、下一张、添加文字、插图、下载）
- 中间：画布区域（居中显示，可用 CSS scale 适配屏幕）
- 右侧：属性面板（根据选中节点类型变化）

【交付】
11) 请先输出文件结构与实现计划
12) 再逐步生成代码
13) 最后给出：
    - 如何启动（npm install / npm run dev）
    - 使用说明
    - 关键实现点说明（尤其是文本双击编辑与导出逻辑）
      "
